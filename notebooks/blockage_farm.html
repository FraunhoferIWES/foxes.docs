

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>Blockage modelling 1 - foxes 0.7.1
 documentation</title>
      
    
    
      
        
        
          
          
          <meta name="theme-color" content="#009485">
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.eaee958e8db0b4370.min.css?v=0db274d5" />
        <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#Wind-farm-blockage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="foxes 0.7.1
 documentation" class="md-header__button md-logo" aria-label="foxes 0.7.1
 documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            foxes 0.7.1
 documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blockage modelling 1
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/FraunhoferIWES/foxes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    foxes
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="foxes 0.7.1
 documentation" class="md-nav__button md-logo" aria-label="foxes 0.7.1
 documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    foxes 0.7.1
 documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/FraunhoferIWES/foxes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    foxes
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../citation.html" class="md-nav__link">
        <span title="/citation.md (reference label)" class="md-ellipsis">Citation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        <span title="/installation.md (reference label)" class="md-ellipsis">Installation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        <span title="/overview.md (reference label)" class="md-ellipsis">Overview -<wbr> how to setup foxes</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../models.html" class="md-nav__link">
        <span title="/models.rst (reference label)" class="md-ellipsis">Models</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../examples.html"><span title="/examples.rst (reference label)" class="md-ellipsis">Examples</span></a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          <span title="/examples.rst (reference label)" class="md-ellipsis">Examples</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="model_book.html" class="md-nav__link">
        <span title="/notebooks/model_book.ipynb (reference label)" class="md-ellipsis">The model book</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="rotor_models.html" class="md-nav__link">
        <span title="/notebooks/rotor_models.ipynb (reference label)" class="md-ellipsis">Rotor model visualizations</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="single_row.html" class="md-nav__link">
        <span title="/notebooks/single_row.ipynb (reference label)" class="md-ellipsis">Single row of turbines</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="timeseries.html" class="md-nav__link">
        <span title="/notebooks/timeseries.ipynb (reference label)" class="md-ellipsis">Timeseries data</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="multi_height.html" class="md-nav__link">
        <span title="/notebooks/multi_height.ipynb (reference label)" class="md-ellipsis">Multi-<wbr>height wind data</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="wind_rose.html" class="md-nav__link">
        <span title="/notebooks/wind_rose.ipynb (reference label)" class="md-ellipsis">Wind rose data</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="sector_man.html" class="md-nav__link">
        <span title="/notebooks/sector_man.ipynb (reference label)" class="md-ellipsis">Wind sector management</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="heterogeneous.html" class="md-nav__link">
        <span title="/notebooks/heterogeneous.ipynb (reference label)" class="md-ellipsis">Heterogeneous flow</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="power_mask.html" class="md-nav__link">
        <span title="/notebooks/power_mask.ipynb (reference label)" class="md-ellipsis">Power mask</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="yawed_wake.html" class="md-nav__link">
        <span title="/notebooks/yawed_wake.ipynb (reference label)" class="md-ellipsis">Yawed rotor wakes</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="layout_opt.html" class="md-nav__link">
        <span title="/notebooks/layout_opt.ipynb (reference label)" class="md-ellipsis">Layout optimization</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="timelines.html" class="md-nav__link">
        <span title="/notebooks/timelines.ipynb (reference label)" class="md-ellipsis">Dynamic wakes 1</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="sequential.html" class="md-nav__link">
        <span title="/notebooks/sequential.ipynb (reference label)" class="md-ellipsis">Dynamic wakes 2</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span title="/notebooks/blockage_farm.ipynb (reference label)" class="md-ellipsis">Blockage modelling 1</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span title="/notebooks/blockage_farm.ipynb (reference label)" class="md-ellipsis">Blockage modelling 1</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span title="/notebooks/blockage_farm.ipynb (reference label)" class="md-ellipsis">Blockage modelling 1</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Wind-farm-blockage" class="md-nav__link">
    <span title="/notebooks/blockage_farm.ipynb#wind-farm-blockage (reference label)" class="md-ellipsis">Wind farm blockage</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="blockage_comparison.html" class="md-nav__link">
        <span title="/notebooks/blockage_comparison.ipynb (reference label)" class="md-ellipsis">Blockage modelling 2</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="partial_wakes.html" class="md-nav__link">
        <span title="/notebooks/partial_wakes.ipynb (reference label)" class="md-ellipsis">Partial wakes verification</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../api.html" class="md-nav__link">
        <span title="/api.rst (reference label)" class="md-ellipsis">API</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="data.html" class="md-nav__link">
        <span title="/notebooks/data.ipynb (reference label)" class="md-ellipsis">Static data</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../history.html" class="md-nav__link">
        <span title="/history.md (reference label)" class="md-ellipsis">History</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span title="/notebooks/blockage_farm.ipynb (reference label)" class="md-ellipsis">Blockage modelling 1</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Wind-farm-blockage" class="md-nav__link">
    <span title="/notebooks/blockage_farm.ipynb#wind-farm-blockage (reference label)" class="md-ellipsis">Wind farm blockage</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<script src='http://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js'></script>
<script>require=requirejs;</script><h1 id="Blockage-modelling-1">Blockage modelling 1<a class="headerlink" href="#Blockage-modelling-1" title="Link to this heading">¶</a></h1>
<h2 id="Wind-farm-blockage">Wind farm blockage<a class="headerlink" href="#Wind-farm-blockage" title="Link to this heading">¶</a></h2>
<p>This example shows how to use the Rankine-Half-Body model for modelling the blockage effect. We need the following imports:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [1]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">import</span> <span class="nn">foxes</span>
<span class="kn">import</span> <span class="nn">foxes.variables</span> <span class="k">as</span> <span class="nn">FV</span>
<span class="kn">import</span> <span class="nn">foxes.constants</span> <span class="k">as</span> <span class="nn">FC</span>
</code></pre></div>
</div>
</div>
<p>First, we setup the model book and the wind farm, here we pick 20 x 10 turbines on a regular grid:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [2]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">farm</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">WindFarm</span><span class="p">()</span>
<span class="n">foxes</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">farm_layout</span><span class="o">.</span><span class="n">add_grid</span><span class="p">(</span>
    <span class="n">farm</span><span class="o">=</span><span class="n">farm</span><span class="p">,</span>
    <span class="n">xy_base</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
    <span class="n">step_vectors</span><span class="o">=</span><span class="p">[[</span><span class="mf">800.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">400.0</span><span class="p">]],</span>
    <span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
    <span class="n">turbine_models</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DTU10MW&quot;</span><span class="p">],</span>
    <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span>
<span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">FarmLayoutOutput</span><span class="p">(</span><span class="n">farm</span><span class="p">)</span><span class="o">.</span><span class="n">get_figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_blockage_farm_4_0.png" src="../_images/notebooks_blockage_farm_4_0.png" />
</div>
</div>
<p>As wind conditions, we choose a single wind direction state from 270 degrees:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [3]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># create ambient wind conditions, a single uniform state:</span>
<span class="n">states</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">SingleStateStates</span><span class="p">(</span><span class="n">ws</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span> <span class="n">wd</span><span class="o">=</span><span class="mf">270.0</span><span class="p">,</span> <span class="n">ti</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span> <span class="n">rho</span><span class="o">=</span><span class="mf">1.225</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<p>For induction models, the <code class="docutils literal notranslate"><span class="pre">Iterative</span></code> algorithm should be invoked. This is due to the fact that upstream turbines can be influenced by the induction zone of a turbine, which the <code class="docutils literal notranslate"><span class="pre">Downstream</span></code> algorithm simply would not notice.</p>
<p>By default the <code class="docutils literal notranslate"><span class="pre">Iterative</span></code> algorithm adds a smooth cutin region to the thrust coefficient curve. This behaviour can be changed by modifying the default choice of the constructor argument <code class="docutils literal notranslate"><span class="pre">mod_cutin={modify_ct=True,</span> <span class="pre">modify_P=False}</span></code>. Alternatively, under-relaxation of the variable <code class="docutils literal notranslate"><span class="pre">FV.CT</span></code> could by applied, e.g. by calling <code class="docutils literal notranslate"><span class="pre">aglo.set_urelax(pre_wake={FV.CT:</span> <span class="pre">0.5})</span></code> before calculations. This means that for each iteration the freshly calculated value is mixed with the result from the previous
iteration. Both approaches avoid wakes switching on and off repeatedly between subsequent iterations in some cases, ensuring convergence also in the vicinity of the cut-in and cut-out regions of the thrust curve. The convergence criteria can also be modified by setting the parameter <code class="docutils literal notranslate"><span class="pre">conv_crit</span></code>, see API.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [4]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">algo</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">algorithms</span><span class="o">.</span><span class="n">Iterative</span><span class="p">(</span>
    <span class="n">farm</span><span class="p">,</span>
    <span class="n">states</span><span class="p">,</span>
    <span class="n">rotor_model</span><span class="o">=</span><span class="s2">&quot;centre&quot;</span><span class="p">,</span>
    <span class="n">wake_models</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;RHB&quot;</span><span class="p">,</span> <span class="s2">&quot;Bastankhah025_linear_lim_k004&quot;</span><span class="p">],</span>
    <span class="n">wake_frame</span><span class="o">=</span><span class="s2">&quot;rotor_wd&quot;</span><span class="p">,</span>
    <span class="n">partial_wakes</span><span class="o">=</span><span class="s2">&quot;grid36&quot;</span><span class="p">,</span>
    <span class="n">chunks</span><span class="o">=</span><span class="p">{</span><span class="n">FC</span><span class="o">.</span><span class="n">STATE</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="n">FC</span><span class="o">.</span><span class="n">POINT</span><span class="p">:</span> <span class="mi">4000</span><span class="p">},</span>
    <span class="n">verbosity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
<p>Notice the <code class="docutils literal notranslate"><span class="pre">RHB</span></code> model among the list of wake models. This is the <a class="reference external" href="https://www.fnc.co.uk/media/o5eosxas/a-potential-flow-model-for-wind-turbine-induction-and-wind-farm-blockage.pdf">Rankine-Half-Body</a> induction model, adding an induction zone for each turbine. We can now calculate the results:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [5]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">foxes</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">runners</span><span class="o">.</span><span class="n">DaskRunner</span><span class="p">()</span> <span class="k">as</span> <span class="n">runner</span><span class="p">:</span>
    <span class="n">farm_results</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">algo</span><span class="o">.</span><span class="n">calc_farm</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">farm_results</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Algorithm Iterative: Iteration 0


Initializing algorithm &#39;Iterative&#39;
Initializing model &#39;Iterative&#39;
Initializing model &#39;SingleStateStates&#39;
Initializing model &#39;centre&#39;
Initializing model &#39;basic_ctrl_prer&#39;
Initializing model &#39;DTU10MW&#39;
Turbine type &#39;DTU10MW&#39;: Reading static data from context &#39;power_ct_curve&#39;
Path: /home/jonas/gits/wakes/foxes/foxes/data/power_ct_curves/DTU-10MW-D178d3-H119.csv
Initializing model &#39;basic_ctrl_postr&#39;
Initializing model &#39;basic_ctrl&#39;
Initializing model &#39;rotor_wd&#39;
Initializing model &#39;Madsen&#39;
Initializing model &#39;RHB&#39;
Initializing model &#39;Bastankhah025_linear_lim_k004&#39;
Initializing model &#39;GridRotor&#39;
Initializing model &#39;grid36&#39;

--------------------------------------------------
  Running Iterative: calc_farm
--------------------------------------------------
  n_states : 1
  n_turbines: 48
--------------------------------------------------
  states   : SingleStateStates()
  rotor    : CentreRotor()
  controller: BasicFarmController()
  wake frame: RotorWD()
--------------------------------------------------
  wakes:
    0) RHB: RankineHalfBody(induction=Madsen)
    1) Bastankhah025_linear_lim_k004: Bastankhah2014(ws_linear_lim, induction=Madsen, k=0.04)
--------------------------------------------------
  partial wakes:
    0) RHB: grid36, PartialGrid(rotor_model=GridRotor)
    1) Bastankhah025_linear_lim_k004: grid36, PartialGrid(rotor_model=GridRotor)
--------------------------------------------------
  turbine models:
    0) DTU10MW: PCtFile(D=178.3, H=119.0, P_nominal=10000.0, P_unit=kW, rho=1.225)
--------------------------------------------------

Initializing model &#39;InitFarmData&#39;
Initializing model &#39;SetAmbFarmResults&#39;
Initializing model &#39;FarmWakesCalculation&#39;
Initializing model &#39;Iterative_calc&#39;

--------------------------------------------------
  Model oder
--------------------------------------------------
00) basic_ctrl
01) InitFarmData
02) centre
03) basic_ctrl
  03.0) Post-rotor: DTU10MW
04) SetAmbFarmResults
05) FarmWakesCalculation
--------------------------------------------------

[########################################] | 100% Completed | 101.54 ms

Input data:

 &lt;xarray.Dataset&gt; Size: 468B
Dimensions:      (state: 1, turbine: 48, tmodels: 1)
Coordinates:
  * state        (state) int64 8B 0
  * tmodels      (tmodels) &lt;U7 28B &#39;DTU10MW&#39;
Dimensions without coordinates: turbine
Data variables:
    weight       (state, turbine) float64 384B dask.array&lt;chunksize=(1, 48), meta=np.ndarray&gt;
    tmodel_sels  (state, turbine, tmodels) bool 48B dask.array&lt;chunksize=(1, 48, 1), meta=np.ndarray&gt;


Farm variables: AMB_CT, AMB_P, AMB_REWS, AMB_REWS2, AMB_REWS3, AMB_RHO, AMB_TI, AMB_WD, AMB_YAW, CT, D, H, P, REWS, REWS2, REWS3, RHO, TI, WD, X, Y, YAW, order, order_inv, order_ssel, weight

Output variables: AMB_CT, AMB_P, AMB_REWS, AMB_REWS2, AMB_REWS3, AMB_RHO, AMB_TI, AMB_WD, AMB_YAW, CT, D, H, P, REWS, REWS2, REWS3, RHO, TI, WD, X, Y, YAW, order, order_inv, order_ssel, weight

Chunks: {&#39;state&#39;: None, &#39;point&#39;: 4000, &#39;target&#39;: 4000}


Calculating 1 states for 48 turbines
[########################################] | 100% Completed | 101.97 ms

Algorithm Iterative: Iteration 1

[########################################] | 100% Completed | 101.88 ms
[########################################] | 100% Completed | 101.64 ms

DefaultConv: Convergence check
  REWS: delta = 7.281e-01, lim = 1.000e-06  --  FAILED
  TI  : delta = 0.000e+00, lim = 1.000e-07  --  OK
  CT  : delta = 1.153e-02, lim = 1.000e-07  --  FAILED

Algorithm Iterative: Iteration 2

[########################################] | 100% Completed | 101.48 ms
[########################################] | 100% Completed | 105.62 ms

DefaultConv: Convergence check
  REWS: delta = 1.334e-01, lim = 1.000e-06  --  FAILED
  TI  : delta = 0.000e+00, lim = 1.000e-07  --  OK
  CT  : delta = 4.417e-03, lim = 1.000e-07  --  FAILED

Algorithm Iterative: Iteration 3

[########################################] | 100% Completed | 101.20 ms
[########################################] | 100% Completed | 102.61 ms

DefaultConv: Convergence check
  REWS: delta = 1.750e-02, lim = 1.000e-06  --  FAILED
  TI  : delta = 0.000e+00, lim = 1.000e-07  --  OK
  CT  : delta = 3.497e-04, lim = 1.000e-07  --  FAILED

Algorithm Iterative: Iteration 4

[########################################] | 100% Completed | 101.15 ms
[########################################] | 100% Completed | 104.29 ms

DefaultConv: Convergence check
  REWS: delta = 1.682e-03, lim = 1.000e-06  --  FAILED
  TI  : delta = 0.000e+00, lim = 1.000e-07  --  OK
  CT  : delta = 2.523e-05, lim = 1.000e-07  --  FAILED

Algorithm Iterative: Iteration 5

[########################################] | 100% Completed | 146.88 ms
[########################################] | 100% Completed | 104.73 ms

DefaultConv: Convergence check
  REWS: delta = 1.512e-04, lim = 1.000e-06  --  FAILED
  TI  : delta = 0.000e+00, lim = 1.000e-07  --  OK
  CT  : delta = 2.853e-06, lim = 1.000e-07  --  FAILED

Algorithm Iterative: Iteration 6

[########################################] | 100% Completed | 101.26 ms
[########################################] | 100% Completed | 101.15 ms

DefaultConv: Convergence check
  REWS: delta = 1.804e-05, lim = 1.000e-06  --  FAILED
  TI  : delta = 0.000e+00, lim = 1.000e-07  --  OK
  CT  : delta = 2.983e-07, lim = 1.000e-07  --  FAILED

Algorithm Iterative: Iteration 7

[########################################] | 100% Completed | 101.39 ms
[########################################] | 100% Completed | 102.21 ms

DefaultConv: Convergence check
  REWS: delta = 1.859e-06, lim = 1.000e-06  --  FAILED
  TI  : delta = 0.000e+00, lim = 1.000e-07  --  OK
  CT  : delta = 3.149e-08, lim = 1.000e-07  --  OK

Algorithm Iterative: Iteration 8

[########################################] | 100% Completed | 101.07 ms
[########################################] | 100% Completed | 103.80 ms

DefaultConv: Convergence check
  REWS: delta = 1.958e-07, lim = 1.000e-06  --  OK
  TI  : delta = 0.000e+00, lim = 1.000e-07  --  OK
  CT  : delta = 3.232e-09, lim = 1.000e-07  --  OK

Algorithm Iterative: Convergence reached.

[########################################] | 100% Completed | 101.10 ms
[########################################] | 100% Completed | 102.27 ms
&lt;xarray.Dataset&gt; Size: 8kB
Dimensions:     (state: 1, turbine: 48)
Coordinates:
  * state       (state) int64 8B 0
Dimensions without coordinates: turbine
Data variables: (12/20)
    AMB_P       (state, turbine) float64 384B 3.731e+03 3.731e+03 ... 3.731e+03
    AMB_REWS    (state, turbine) float64 384B 8.0 8.0 8.0 8.0 ... 8.0 8.0 8.0
    AMB_RHO     (state, turbine) float64 384B 1.225 1.225 1.225 ... 1.225 1.225
    AMB_TI      (state, turbine) float64 384B 0.04 0.04 0.04 ... 0.04 0.04 0.04
    AMB_WD      (state, turbine) float64 384B 270.0 270.0 270.0 ... 270.0 270.0
    CT          (state, turbine) float64 384B 0.8165 0.8171 ... 0.9116 0.9042
    ...          ...
    YAW         (state, turbine) float64 384B 270.0 270.0 270.0 ... 270.0 270.0
    order       (state, turbine) int64 384B 0 1 2 3 4 5 6 ... 41 45 46 43 44 47
    order_inv   (state, turbine) int64 384B 0 1 2 3 4 5 6 ... 41 43 44 45 46 47
    order_ssel  (state, turbine) int64 384B 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0
    weight      (state, turbine) float64 384B 1.0 1.0 1.0 1.0 ... 1.0 1.0 1.0
    tname       (turbine) &lt;U3 576B &#39;T0&#39; &#39;T1&#39; &#39;T2&#39; &#39;T3&#39; ... &#39;T45&#39; &#39;T46&#39; &#39;T47&#39;
</pre></div></div>
</div>
<p>The following visualizes the flow field around the most south-westerly turbine in the wind farm:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [6]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">o</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">FlowPlots2D</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">farm_results</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">gen_states_fig_xy</span><span class="p">(</span>
    <span class="n">FV</span><span class="o">.</span><span class="n">WS</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">xmin</span><span class="o">=-</span><span class="mi">300</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
    <span class="n">ymin</span><span class="o">=-</span><span class="mi">200</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
    <span class="n">levels</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">quiver_n</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
    <span class="n">quiver_pars</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_blockage_farm_12_0.png" src="../_images/notebooks_blockage_farm_12_0.png" />
</div>
</div>
<p>The induction zone in front of the rotor is clearly visible. For the complete wind farm, the individual induction zones merge:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [7]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">o</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">FlowPlots2D</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">farm_results</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">gen_states_fig_xy</span><span class="p">(</span>
    <span class="n">FV</span><span class="o">.</span><span class="n">WS</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">xspace</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
    <span class="n">yspace</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">levels</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_blockage_farm_14_0.png" src="../_images/notebooks_blockage_farm_14_0.png" />
</div>
</div>
<p>The individual contributions to the blockage zone are visible when plotting the wind speed along a straight line in y direction, at fixed x in front of the first row of turbines:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [8]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">H</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">mbook</span><span class="o">.</span><span class="n">turbine_types</span><span class="p">[</span><span class="s2">&quot;DTU10MW&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">H</span>
<span class="n">n_points</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_points</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">points</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="n">n_points</span><span class="p">)[</span><span class="kc">None</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">points</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">H</span>

<span class="n">xlist</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">500</span><span class="p">,</span> <span class="o">-</span><span class="mi">400</span><span class="p">,</span> <span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="o">-</span><span class="mi">200</span><span class="p">]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xlist</span><span class="p">:</span>
    <span class="n">points</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">point_results</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">calc_points</span><span class="p">(</span><span class="n">farm_results</span><span class="p">,</span> <span class="n">points</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">point_results</span><span class="p">[</span><span class="n">FV</span><span class="o">.</span><span class="n">WS</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="p">:],</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;x = </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2"> m&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;y [m]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wind speed [m/s]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_blockage_farm_16_0.png" src="../_images/notebooks_blockage_farm_16_0.png" />
</div>
</div>
<p>Now we investigate the effect of mirroring turbines to account for the speed up effect due to the constrictions from the ground and boundary layer. For this we create a wind farm which consists of only one turbine:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [9]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">farm</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">WindFarm</span><span class="p">()</span>
<span class="n">farm</span><span class="o">.</span><span class="n">add_turbine</span><span class="p">(</span><span class="n">foxes</span><span class="o">.</span><span class="n">Turbine</span><span class="p">(</span><span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="n">turbine_models</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DTU10MW&quot;</span><span class="p">]))</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Turbine 0, T0: DTU10MW
</pre></div></div>
</div>
<p>Here we calculate farm results for 3 scenarios using only the Rankine Half Body model: 1) No ground effect 2) Using the ground as mirror 3) Using the height 500m as a mirror for the boundary layer</p>
<p>A flow plot for each scenario is generated, along with a windspeed profile comparison.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [10]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># set up figure</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">vmin</span> <span class="o">=</span> <span class="n">states</span><span class="o">.</span><span class="n">ws</span> <span class="o">*</span> <span class="mf">0.5</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">npoints</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">profile_pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">npoints</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="n">bmodel</span> <span class="o">=</span> <span class="s2">&quot;RHB&quot;</span>
<span class="n">mirror_combo</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;No mirror&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;Ground mirror&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">bmodel</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]},</span>
    <span class="s2">&quot;Ground and 500m mirror&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">bmodel</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">]},</span>
<span class="p">}</span>

<span class="k">with</span> <span class="n">foxes</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">runners</span><span class="o">.</span><span class="n">DaskRunner</span><span class="p">()</span> <span class="k">as</span> <span class="n">runner</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">mirror</span><span class="p">,</span> <span class="n">mirrors</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">mirror_combo</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>

        <span class="n">algo</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">algorithms</span><span class="o">.</span><span class="n">Iterative</span><span class="p">(</span>
            <span class="n">farm</span><span class="p">,</span>
            <span class="n">states</span><span class="p">,</span>
            <span class="n">rotor_model</span><span class="o">=</span><span class="s2">&quot;centre&quot;</span><span class="p">,</span>
            <span class="n">wake_models</span><span class="o">=</span><span class="p">[</span><span class="n">bmodel</span><span class="p">],</span>
            <span class="n">wake_frame</span><span class="o">=</span><span class="s2">&quot;rotor_wd&quot;</span><span class="p">,</span>
            <span class="n">partial_wakes</span><span class="o">=</span><span class="s2">&quot;grid36&quot;</span><span class="p">,</span>
            <span class="n">wake_mirrors</span><span class="o">=</span><span class="n">mirrors</span><span class="p">,</span>
            <span class="n">chunks</span><span class="o">=</span><span class="p">{</span><span class="n">FC</span><span class="o">.</span><span class="n">STATE</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="n">FC</span><span class="o">.</span><span class="n">POINT</span><span class="p">:</span> <span class="mi">4000</span><span class="p">},</span>
            <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">farm_results</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">algo</span><span class="o">.</span><span class="n">calc_farm</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">FlowPlots2D</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">farm_results</span><span class="p">,</span> <span class="n">runner</span><span class="o">=</span><span class="n">runner</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">gen_states_fig_xz</span><span class="p">(</span>
            <span class="n">var</span><span class="o">=</span><span class="n">FV</span><span class="o">.</span><span class="n">WS</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">xmin</span><span class="o">=-</span><span class="mi">300</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">zmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">zmax</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">levels</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
            <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">mirror</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

        <span class="c1"># get point data for profile plot and store in df</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">npoints</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="n">points</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">200</span>
        <span class="n">points</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">points</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="n">npoints</span><span class="p">)[</span><span class="kc">None</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">point_results</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">algo</span><span class="o">.</span><span class="n">calc_points</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">farm_results</span><span class="p">,</span> <span class="n">points</span><span class="p">))</span>
        <span class="n">profile_pts</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">point_results</span><span class="p">[</span><span class="n">FV</span><span class="o">.</span><span class="n">WS</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="c1"># x points, WS</span>
        <span class="n">profile_pts</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span> <span class="c1">#  y points, z values</span>

<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Algorithm Iterative: Iteration 0

[########################################] | 100% Completed | 101.61 ms
[########################################] | 100% Completed | 103.79 ms
[########################################] | 100% Completed | 100.97 ms
[########################################] | 100% Completed | 101.60 ms
[########################################] | 100% Completed | 101.26 ms
[########################################] | 100% Completed | 104.14 ms
[########################################] | 100% Completed | 101.54 ms
[########################################] | 100% Completed | 101.82 ms
[########################################] | 100% Completed | 101.36 ms
[########################################] | 100% Completed | 103.09 ms

Algorithm Iterative: Iteration 0

[########################################] | 100% Completed | 101.36 ms
[########################################] | 100% Completed | 101.75 ms
[########################################] | 100% Completed | 101.25 ms
[########################################] | 100% Completed | 101.92 ms
[########################################] | 100% Completed | 101.40 ms
[########################################] | 100% Completed | 101.41 ms
[########################################] | 100% Completed | 101.26 ms
[########################################] | 100% Completed | 101.62 ms
[########################################] | 100% Completed | 101.00 ms
[########################################] | 100% Completed | 102.54 ms

Algorithm Iterative: Iteration 0

[########################################] | 100% Completed | 101.07 ms
[########################################] | 100% Completed | 102.11 ms
[########################################] | 100% Completed | 101.77 ms
[########################################] | 100% Completed | 101.47 ms
[########################################] | 100% Completed | 101.16 ms
[########################################] | 100% Completed | 101.88 ms
[########################################] | 100% Completed | 101.33 ms
[########################################] | 100% Completed | 101.18 ms
[########################################] | 100% Completed | 101.53 ms
[########################################] | 100% Completed | 101.27 ms
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_blockage_farm_20_1.png" src="../_images/notebooks_blockage_farm_20_1.png" />
</div>
</div>
<p>Now we plot the wind speed profile in front of the row of turbines at x=-200 and y=0. Here we observe the additional blockage effect caused by the mirrored turbines:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [11]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="s2">&quot;--&quot;</span><span class="p">,</span><span class="s2">&quot;-.&quot;</span><span class="p">,</span><span class="s2">&quot;:&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">mirror</span><span class="p">,</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">mirror_combo</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">profile_pts</span><span class="p">[:,</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">],</span><span class="n">profile_pts</span><span class="p">[:,</span><span class="mi">1</span><span class="p">,</span><span class="n">i</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">mirror</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">lines</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Profile comparison&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wind speed [m/s]&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_blockage_farm_22_0.png" src="../_images/notebooks_blockage_farm_22_0.png" />
</div>
</div>
<p>While the ground mirror seems to have a noticable effect in this example, the reflection from the imagined top of the boundary layer at 500 m seems to be small at the rotor relevant heights.</p>
<p>Let’s finish by looking at the flow in a more realistic modelling setting. As an example, we apply the <code class="docutils literal notranslate"><span class="pre">SelfSimilar2020</span></code> induction model with ground effects to a stable ambient wind speed profile, and combine this with the <code class="docutils literal notranslate"><span class="pre">Bastankhah2016</span></code> wake deficit model:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>In [12]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">states</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">SingleStateStates</span><span class="p">(</span>
    <span class="n">ws</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span> <span class="n">wd</span><span class="o">=</span><span class="mf">270.0</span><span class="p">,</span> <span class="n">ti</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span> <span class="n">rho</span><span class="o">=</span><span class="mf">1.225</span><span class="p">,</span> <span class="n">z0</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span> <span class="n">MOL</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">H</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span>
    <span class="n">profiles</span><span class="o">=</span><span class="p">{</span><span class="n">FV</span><span class="o">.</span><span class="n">WS</span><span class="p">:</span> <span class="s2">&quot;ABLLogStableWsProfile&quot;</span><span class="p">})</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

<span class="n">bmodels</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;None&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;SelfSimilar2020&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;SelfSimilar2020&quot;</span><span class="p">]}</span>
<span class="k">with</span> <span class="n">foxes</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">runners</span><span class="o">.</span><span class="n">DaskRunner</span><span class="p">()</span> <span class="k">as</span> <span class="n">runner</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">bname</span><span class="p">,</span> <span class="n">wakes0</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bmodels</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>

        <span class="n">algo</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">algorithms</span><span class="o">.</span><span class="n">Iterative</span><span class="p">(</span>
            <span class="n">farm</span><span class="p">,</span>
            <span class="n">states</span><span class="p">,</span>
            <span class="n">rotor_model</span><span class="o">=</span><span class="s2">&quot;grid36&quot;</span><span class="p">,</span>
            <span class="n">wake_models</span><span class="o">=</span><span class="n">wakes0</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;IECTI2019_quartic&quot;</span><span class="p">,</span> <span class="s2">&quot;Bastankhah2016_linear_lim_k004&quot;</span><span class="p">],</span>
            <span class="n">wake_frame</span><span class="o">=</span><span class="s2">&quot;rotor_wd&quot;</span><span class="p">,</span>
            <span class="n">partial_wakes</span><span class="o">=</span><span class="s2">&quot;rotor_points&quot;</span><span class="p">,</span>
            <span class="n">wake_mirrors</span><span class="o">=</span><span class="p">{</span><span class="n">bmodel</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]},</span>
            <span class="n">chunks</span><span class="o">=</span><span class="p">{</span><span class="n">FC</span><span class="o">.</span><span class="n">STATE</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="n">FC</span><span class="o">.</span><span class="n">POINT</span><span class="p">:</span> <span class="mi">4000</span><span class="p">},</span>
            <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">farm_results</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">algo</span><span class="o">.</span><span class="n">calc_farm</span><span class="p">)</span>

        <span class="n">o</span> <span class="o">=</span> <span class="n">foxes</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">FlowPlots2D</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">farm_results</span><span class="p">,</span> <span class="n">runner</span><span class="o">=</span><span class="n">runner</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">gen_states_fig_xz</span><span class="p">(</span>
            <span class="n">var</span><span class="o">=</span><span class="n">FV</span><span class="o">.</span><span class="n">WS</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">xmin</span><span class="o">=-</span><span class="mi">1000</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">3000</span><span class="p">,</span>
            <span class="n">zmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">zmax</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
            <span class="n">levels</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
            <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Induction: </span><span class="si">{</span><span class="n">bname</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Algorithm Iterative: Iteration 0

[########################################] | 100% Completed | 101.38 ms
[########################################] | 100% Completed | 102.36 ms
[########################################] | 100% Completed | 101.47 ms
[########################################] | 100% Completed | 104.78 ms
[########################################] | 100% Completed | 100.93 ms
[########################################] | 100% Completed | 101.53 ms

Algorithm Iterative: Iteration 0

[########################################] | 100% Completed | 101.26 ms
[########################################] | 100% Completed | 101.46 ms
[########################################] | 100% Completed | 101.18 ms
[########################################] | 100% Completed | 101.60 ms
[########################################] | 100% Completed | 101.44 ms
[########################################] | 100% Completed | 102.03 ms
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_blockage_farm_25_1.png" src="../_images/notebooks_blockage_farm_25_1.png" />
</div>
</div>






                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="sequential.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Dynamic wakes 2" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Dynamic wakes 2
            </div>
          </div>
        </a>
      
      
        
        <a href="blockage_comparison.html" class="md-footer__link md-footer__link--next" aria-label="Next: Blockage modelling 2" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Blockage modelling 2
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2024, Fraunhofer IWES.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    7.2.6.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
        <script>window.MathJax = {"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script id="MathJax-script" src="../_static/mathjax/tex-mml-chtml.js?v=cadf963e"></script>
    
  </body>
</html>